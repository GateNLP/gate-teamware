(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{357:function(t,n,e){},389:function(t,n,e){"use strict";e(357)},394:function(t,n,e){"use strict";e.r(n);var a=e(386),i=(e(387),e(88),e(193),e(194),e(335),e(54),e(336),e(111),{name:"InputErrorDisplay",props:["state","msgError","msgSuccess"],computed:{errorMessage:function(){return this.msgError?this.msgError:"Annotation required."},successMessage:function(){return this.msgSuccess?this.msgSuccess:"Annotation valid."}}}),o=e(53),s=Object(o.a)(i,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t._t("default"),t._v(" "),e("b-form-invalid-feedback",{attrs:{state:t.state}},[t._v("\n    "+t._s(t.errorMessage)+"\n  ")]),t._v(" "),e("b-form-valid-feedback",{attrs:{state:t.state}},[t._v("\n    "+t._s(t.successMessage)+"\n  ")])],2)}),[],!1,null,"3d308658",null).exports,r={name:"TextInput",components:{InputErrorDisplay:s},props:["value","config","state","msgError","msgSuccess"],computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{validate:function(){return!0}}},u=Object(o.a)(r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("InputErrorDisplay",{attrs:{state:t.state,"msg-error":t.msgError,"msg-success":t.msgSuccess}},[e("BInput",{attrs:{name:t.config.name,state:t.state},model:{value:t.inputVal,callback:function(n){t.inputVal=n},expression:"inputVal"}})],1)}),[],!1,null,"6fd3e750",null).exports,l={name:"TextareaInput",components:{InputErrorDisplay:s},props:["value","config","state","msgError","msgSuccess"],computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},c=Object(o.a)(l,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("InputErrorDisplay",{attrs:{state:t.state,"msg-error":t.msgError,"msg-success":t.msgSuccess}},[e("BTextarea",{attrs:{name:t.config.name,state:t.state},model:{value:t.inputVal,callback:function(n){t.inputVal=n},expression:"inputVal"}})],1)}),[],!1,null,"b283bc9e",null).exports;function p(t){var n=[];for(var e in t)n.push({value:e,text:t[e]});return n}var m={name:"RadioInput",components:{InputErrorDisplay:s},props:["value","config","state","msgError","msgSuccess"],computed:{options:function(){return this.config&&this.config.options?p(this.config.options):null},inputVal:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},d=Object(o.a)(m,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("InputErrorDisplay",{attrs:{state:t.state,"msg-error":t.msgError,"msg-success":t.msgSuccess}},[e("b-form-radio-group",{attrs:{name:t.config.name,options:t.options,state:t.state},model:{value:t.inputVal,callback:function(n){t.inputVal=n},expression:"inputVal"}})],1)}),[],!1,null,"6069a453",null).exports,f={name:"CheckboxInput",components:{InputErrorDisplay:s},props:["value","config","state","msgError","msgSuccess"],computed:{options:function(){return this.config&&this.config.options?p(this.config.options):null},inputVal:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},h=Object(o.a)(f,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("InputErrorDisplay",{attrs:{state:t.state,"msg-error":t.msgError,"msg-success":t.msgSuccess}},[e("b-form-checkbox-group",{attrs:{name:t.config.name,options:t.options,state:t.state},model:{value:t.inputVal,callback:function(n){t.inputVal=n},expression:"inputVal"}})],1)}),[],!1,null,"144c7291",null).exports,g={name:"SelectorInput",components:{InputErrorDisplay:s},props:["value","config","state","msgError","msgSuccess"],computed:{options:function(){return this.config&&this.config.options?p(this.config.options):null},inputVal:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},v=Object(o.a)(g,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("InputErrorDisplay",{attrs:{state:t.state,"msg-error":t.msgError,"msg-success":t.msgSuccess}},[e("BFormSelect",{attrs:{options:t.options,state:t.state,name:t.config.name},model:{value:t.inputVal,callback:function(n){t.inputVal=n},expression:"inputVal"}})],1)}),[],!1,null,"af0192d6",null).exports,_=e(388),b={name:"HtmlDisplay",props:["config","document"],computed:{htmlDisplay:function(){try{if(this.config&&this.config.text){var t={};return this.document&&(t=this.document),_.render(this.config.text,t)}}catch(t){console.log(t)}return""}}},y=Object(o.a)(b,(function(){var t=this.$createElement;return(this._self._c||t)("div",{domProps:{innerHTML:this._s(this.htmlDisplay)}})}),[],!1,null,"55e0ebc2",null).exports,x={Annotation:"Annotation",Test:"Test",Training:"Training"},E={name:"MarkdownRenderer",props:{content:{default:""},options:{default:function(){return{markdownIt:{html:!0}}}}}},T={name:"AnnotationRenderer",components:{TextInput:u,TextareaInput:c,RadioInput:d,CheckboxInput:h,SelectorInput:v,HtmlDisplay:y,MarkdownRenderer:Object(o.a)(E,(function(){var t=this.$createElement;return(this._self._c||t)("markdown-it-vue",{attrs:{content:this.content,options:this.options}})}),[],!1,null,"e0913990",null).exports},data:function(){return{annotationOutput:{},validation:{},validationErrorMsg:{},inputTypes:{text:"TextInput",textarea:"TextareaInput",radio:"RadioInput",checkbox:"CheckboxInput",selector:"SelectorInput",html:"HtmlDisplay"},ignoreValidateTypes:["html"],startTime:null,DocumentType:x,answerBgColor:{}}},props:{config:{default:null},document:{default:function(){return{text:"<p>Some html text <strong>in bold</strong>.</p><p>Paragraph 2.</p>"}}},document_type:{default:null},doc_gold_field:{default:"gold"},allow_document_reject:{default:null},allow_cancel:{default:null}},methods:{startTimer:function(){this.startTime=new Date},getTimeElapsed:function(){return this.document_type!=this.DocumentType.Annotation?null:(new Date-this.startTime)/1e3},inputEventHandler:function(t){this.$emit("input",this.annotationOutput)},getInputType:function(t){return t in this.inputTypes?this.inputTypes[t]:null},generateValidationTracker:function(t){if(t){this.validation={};var n,e=Object(a.a)(t);try{for(e.s();!(n=e.n()).done;){var i=n.value;this.validation[i.name]=null}}catch(t){e.e(t)}finally{e.f()}}},validateAnnotation:function(){this.validation={},this.validationErrorMsg={};var t,n=Object(a.a)(this.config);try{for(n.s();!(t=n.n()).done;){var e=t.value,i=e.name,o=e.type;if(this.ignoreValidateTypes.includes(o)||e.optional&&("checkbox"!==o||!("minSelected"in e)))e.name in this.validation&&delete this.validation[i];else if(this.validation[i]=!1,i in this.annotationOutput&&this.valueNotEmpty(this.annotationOutput[i]))if("text"!==o&&"textarea"!==o||!("regex"in e))this.validation[i]="checkbox"!==o||!("minSelected"in e)||e.minSelected<=this.annotationOutput[i].length;else{var s=new RegExp(e.regex);this.validation[i]=s.test(this.annotationOutput[i])}}}catch(t){n.e(t)}finally{n.f()}var r=!0;for(var u in this.validation)this.ignoreValidateTypes.includes(u)||this.validation[u]||(r=!1);return r},valueNotEmpty:function(t){return"string"==typeof t&&t.length>0||t instanceof Array&&t.length>0},submitHandler:function(t){var n=this.getTimeElapsed(),e=this.validateAnnotation();this.$forceUpdate(),e&&(this.$emit("submit",this.annotationOutput,n),this.clearForm(),this.startTimer())},clearForm:function(){this.annotationOutput={},this.validation={}},clearFormHandler:function(t){this.clearForm()},rejectHandler:function(t){this.$emit("reject"),this.startTimer()},cancelHandler:function(t){this.$emit("cancel"),this.startTimer()},getAnswerBgColor:function(t){var n=this.annotationOutput[t.name],e=this.document[this.doc_gold_field][t.name].value;return Object.keys(t.options).includes(n)?n==e?"success":"danger":"Default"},showExplanation:function(t){return"html"!=t.type&&!(this.document_type!=x.Training||!Object.keys(t.options).includes(this.annotationOutput[t.name]))},answerText:function(t){var n=this.annotationOutput[t.name],e=this.document[this.doc_gold_field][t.name].value;return Object.keys(t.options).includes(n)?n==e?"Correct! ✔️":"Incorrect ❌":""}},watch:{config:{immediate:!0,handler:function(t){this.generateValidationTracker(t)}},annotationOutput:{immediate:!0,deep:!0,handler:function(){for(var t in this.config)this.showExplanation(this.config[t])&&(this.answerBgColor[this.config[t].name]=this.getAnswerBgColor(this.config[t]))}}},mounted:function(){for(var t in this.config)"html"!=this.config[t].type&&(this.answerBgColor[this.config[t].name]="Default");this.startTimer()}},w={name:"AnnotationRendererPreview",components:{AnnotationRenderer:Object(o.a)(T,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"annotation"},[t._l(t.config,(function(n){return e("div",{key:n.name},[e("b-form-group",{attrs:{label:n.title}},[n.description?e("p",{staticClass:"annotation-description"},[t._v(t._s(n.description))]):t._e(),t._v(" "),t.getInputType(n.type)?e(t.getInputType(n.type),{tag:"component",attrs:{name:n.name,config:n,document:t.document,state:t.validation[n.name],"msg-success":n.valSuccess,"msg-error":n.valError},on:{input:t.inputEventHandler},model:{value:t.annotationOutput[n.name],callback:function(e){t.$set(t.annotationOutput,n.name,e)},expression:"annotationOutput[elemConfig.name]"}}):e("div",[t._v("\n        Component invalid\n      ")]),t._v(" "),t.showExplanation(n)?e("b-card",{staticClass:"mb-4",attrs:{"border-variant":t.answerBgColor[n.name]}},[e("MarkdownRenderer",{attrs:{content:t.answerText(n)+"<br>"+t.document[t.doc_gold_field][n.name].explanation}})],1):t._e()],1)],1)})),t._v(" "),e("b-row",[e("b-col",[e("BButton",{staticClass:"mr-4",attrs:{variant:"success"},on:{click:function(n){return n.preventDefault(),t.submitHandler.apply(null,arguments)}}},[t._v("Submit")]),t._v(" "),e("BButton",{staticClass:"mr-4",attrs:{variant:"warning"},on:{click:function(n){return n.preventDefault(),t.clearFormHandler.apply(null,arguments)}}},[t._v("Clear")]),t._v(" "),t.allow_document_reject?e("BButton",{attrs:{variant:"danger"},on:{click:function(n){return n.preventDefault(),t.rejectHandler.apply(null,arguments)}}},[t._v("Reject document")]):t._e(),t._v(" "),t.allow_cancel?e("BButton",{attrs:{variant:"danger"},on:{click:function(n){return n.preventDefault(),t.cancelHandler.apply(null,arguments)}}},[t._v("Cancel")]):t._e()],1)],1)],2)}),[],!1,null,"ec9da3f2",null).exports},data:function(){return{annotationOutput:{}}},props:{document:{default:function(){return{text:"Sometext with <strong>html</strong>"}}},config:{default:function(){return[{name:"htmldisplay",type:"html",text:"{{{text}}}"},{name:"sentiment",type:"radio",title:"Sentiment",description:"Please select a sentiment of the text above.",options:{negative:"Negative",neutral:"Neutral",positive:"Positive"}}]}}}},O=(e(389),Object(o.a)(w,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("b-tabs",[e("b-tab",{attrs:{title:"Code"}},[t._t("default")],2),t._v(" "),e("b-tab",{attrs:{title:"Preview"}},[e("b-card",{staticClass:"mb-2 mt-2"},[e("AnnotationRenderer",{attrs:{config:t.config,document:t.document,allow_document_reject:!0},model:{value:t.annotationOutput,callback:function(n){t.annotationOutput=n},expression:"annotationOutput"}})],1),t._v(" "),e("b-card",{staticClass:"mb-2 mt-2"},[e("p",[e("strong",[t._v("Annotation output:")])]),t._v("\n        "+t._s(t.annotationOutput)+"\n      ")])],1)],1)],1)}),[],!1,null,null,null));n.default=O.exports}}]);